import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import React from 'react';
import { useNavigate } from 'react-router-dom';
import { useCart } from '../context/CartContext';
import Home from './Home';
import Footers from './Footers';
const CartPageView = () => {
    const navigate = useNavigate();
    const { cartItems, updateQuantity, removeFromCart, getTotalPrice, clearCart } = useCart();
    // Debug: xem giá trị thực trong cartItems
    console.log('Cart items:', cartItems);
    console.log('Total price from context:', getTotalPrice());
    const formatPrice = (price) => {
        const numPrice = Math.floor(parseFloat(price));
        return numPrice.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.');
    };
    return (_jsxs("div", { className: "min-h-screen bg-gray-50", children: [_jsx(Home, {}), _jsxs("div", { className: "max-w-6xl mx-auto px-4 py-8", children: [_jsx("h1", { className: "text-3xl font-bold mb-8", children: "Gi\u1ECF h\u00E0ng c\u1EE7a b\u1EA1n" }), cartItems.length === 0 ? (_jsxs("div", { className: "text-center py-16", children: [_jsx("div", { className: "mb-8", children: _jsx("svg", { className: "w-24 h-24 mx-auto text-gray-300", fill: "currentColor", viewBox: "0 0 24 24", children: _jsx("path", { d: "M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7ZM9 3V4H15V3H9ZM7 6V19H17V6H7Z" }) }) }), _jsx("h2", { className: "text-2xl font-semibold text-gray-600 mb-4", children: "Gi\u1ECF h\u00E0ng tr\u1ED1ng" }), _jsx("p", { className: "text-gray-500 mb-8", children: "Kh\u00F4ng c\u00F3 s\u1EA3n ph\u1EA9m n\u00E0o trong gi\u1ECF h\u00E0ng" }), _jsx("button", { onClick: () => navigate('/home'), className: "bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-medium", children: "V\u1EC1 trang ch\u1EE7" }), _jsxs("p", { className: "text-sm text-gray-400 mt-4", children: ["B\u1EA1n c\u1EA7n gi\u00FAp \u0111\u1EE1? G\u1ECDi ", _jsx("span", { className: "text-blue-500", children: "1900 232 460" }), " (08:00 - 21:30)"] })] })) : (_jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-8", children: [_jsx("div", { className: "lg:col-span-2", children: _jsxs("div", { className: "bg-white rounded-lg shadow-sm", children: [_jsx("div", { className: "p-6 border-b", children: _jsxs("div", { className: "flex justify-between items-center", children: [_jsxs("h3", { className: "text-lg font-semibold", children: ["S\u1EA3n ph\u1EA9m (", cartItems.length, ")"] }), _jsx("button", { onClick: clearCart, className: "text-red-500 hover:text-red-700 text-sm", children: "X\u00F3a t\u1EA5t c\u1EA3" })] }) }), _jsx("div", { className: "divide-y", children: cartItems.map((item) => (_jsxs("div", { className: "p-6 flex gap-4", children: [_jsx("img", { src: item.image, alt: item.title, className: "w-20 h-20 object-contain rounded border" }), _jsxs("div", { className: "flex-1", children: [_jsx("h4", { className: "font-medium text-gray-900 mb-2", children: item.title }), _jsxs("p", { className: "text-red-600 font-bold text-lg", children: [formatPrice(item.price), "\u20AB"] }), item.originalPrice && (_jsxs("p", { className: "text-gray-400 line-through text-sm", children: [formatPrice(item.originalPrice), "\u20AB"] }))] }), _jsxs("div", { className: "flex flex-col items-end gap-3", children: [_jsx("button", { onClick: () => removeFromCart(item.id), className: "text-gray-400 hover:text-red-500", children: _jsx("svg", { className: "w-5 h-5", fill: "currentColor", viewBox: "0 0 24 24", children: _jsx("path", { d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" }) }) }), _jsxs("div", { className: "flex items-center border rounded", children: [_jsx("button", { onClick: () => updateQuantity(item.id, item.quantity - 1), className: "w-8 h-8 flex items-center justify-center hover:bg-gray-100", children: "-" }), _jsx("span", { className: "w-12 text-center", children: item.quantity }), _jsx("button", { onClick: () => updateQuantity(item.id, item.quantity + 1), className: "w-8 h-8 flex items-center justify-center hover:bg-gray-100", children: "+" })] })] })] }, item.id))) })] }) }), _jsx("div", { className: "lg:col-span-1", children: _jsxs("div", { className: "bg-white rounded-lg shadow-sm p-6 sticky top-4", children: [_jsx("h3", { className: "text-lg font-semibold mb-4", children: "T\u00F3m t\u1EAFt \u0111\u01A1n h\u00E0ng" }), _jsxs("div", { className: "space-y-3 mb-4", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { children: "T\u1EA1m t\u00EDnh:" }), _jsxs("span", { children: [formatPrice(getTotalPrice()), "\u20AB"] })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { children: "Ph\u00ED v\u1EADn chuy\u1EC3n:" }), _jsx("span", { className: "text-green-600", children: "Mi\u1EC5n ph\u00ED" })] }), _jsx("hr", {}), _jsxs("div", { className: "flex justify-between text-lg font-bold", children: [_jsx("span", { children: "T\u1ED5ng c\u1ED9ng:" }), _jsxs("span", { className: "text-red-600", children: [formatPrice(getTotalPrice()), "\u20AB"] })] })] }), _jsx("button", { onClick: () => navigate('/cartpay', {
                                                state: {
                                                    cartItems: cartItems,
                                                    totalPrice: getTotalPrice(),
                                                    isMultipleItems: true
                                                }
                                            }), className: "w-full bg-[#ffd400] hover:bg-yellow-500 text-black font-medium py-3 rounded-lg mb-3", children: "Thanh to\u00E1n" }), _jsx("button", { onClick: () => navigate('/home'), className: "w-full border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 rounded-lg", children: "Ti\u1EBFp t\u1EE5c mua s\u1EAFm" })] }) })] }))] }), _jsx(Footers, {})] }));
};
export default CartPageView;
